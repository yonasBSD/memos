import{j as t}from"./mui-vendor.BwEHDYNi.js";import{u as m,a as n}from"./react-vendor.DIaRSUZC.js";import{a as p,l as u,g as f,i as g,L as h}from"./app.BmPucvBz.js";import{l as x}from"./utils-vendor.gMQV7HrB.js";import"./mermaid-vendor.YaF7NM7v.js";import"./highlight-vendor.BCvQicfw.js";import"./katex-vendor.BOojJMwU.js";import"./leaflet-vendor.BDS7nALv.js";const k=()=>{const c=p(),[a]=m(),[r,e]=n.useState({loading:!0,errorMessage:""});return n.useEffect(()=>{const s=a.get("code"),o=a.get("state");if(!s||!o){e({loading:!1,errorMessage:"Failed to authorize. Invalid state passed to the auth callback."});return}const i=Number(x(o.split("-")));if(!i){e({loading:!1,errorMessage:"No identity provider ID found in the state parameter."});return}const d=u("/auth/callback");(async()=>{try{await f.signInWithSSO({idpId:i,code:s,redirectUri:d}),e({loading:!1,errorMessage:""}),await g(),c("/")}catch(l){console.error(l),e({loading:!1,errorMessage:l.details})}})()},[a]),t.jsx("div",{className:"p-4 py-24 w-full h-full flex justify-center items-center",children:r.loading?t.jsx(h,{className:"animate-spin dark:text-gray-200"}):t.jsx("div",{className:"max-w-lg font-mono whitespace-pre-wrap opacity-80",children:r.errorMessage})})};export{k as default};
