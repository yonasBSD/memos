import{j as e}from"./mui-vendor.BwEHDYNi.js";import{u as w,b as y,k as g,A as S,h as d,f as v,U as N,P as U,D as f,v as x,S as k,M as T,B as $}from"./app.BmPucvBz.js";import{d as o}from"./mermaid-vendor.YaF7NM7v.js";import{o as b}from"./utils-vendor.gMQV7HrB.js";import{d as E,a as l}from"./react-vendor.DIaRSUZC.js";import{E as F}from"./external-link.CnTTPCZY.js";import"./highlight-vendor.BCvQicfw.js";import"./katex-vendor.BOojJMwU.js";import"./leaflet-vendor.BDS7nALv.js";const V=b(()=>{const n=w(),c=E(),m=y(),[t,p]=l.useState(),u=g();l.useEffect(()=>{const r=c.username;if(!r)throw new Error("username is required");S.getOrFetchUserByUsername(r).then(s=>{p(s),m.setFinish()}).catch(s=>{console.error(s),d.error(n("message.user-not-found"))})},[c.username]);const h=l.useMemo(()=>{if(!t)return"";const r=[],s=[],a=[];for(const i of u.filters)i.factor==="contentSearch"?s.push('"'.concat(i.value,'"')):i.factor==="tagSearch"&&a.push('"'.concat(i.value,'"'));return s.length>0&&r.push("content_search == [".concat(s.join(", "),"]")),a.length>0&&r.push("tag_search == [".concat(a.join(", "),"]")),r.join(" && ")},[t,u.filters]),j=()=>{t&&($("".concat(window.location.origin,"/u/").concat(encodeURIComponent(t.username))),d.success(n("message.copied")))};return e.jsx("section",{className:"w-full max-w-3xl mx-auto min-h-full flex flex-col justify-start items-center pb-8",children:e.jsx("div",{className:"w-full flex flex-col justify-start items-center max-w-2xl",children:!m.isLoading&&(t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 w-full flex justify-end items-center gap-2",children:e.jsxs(v,{variant:"outlined",onClick:j,children:[n("common.share"),e.jsx(F,{className:"ml-1 w-4 h-auto opacity-60"})]})}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start pt-4 pb-8 px-3",children:[e.jsx(N,{className:"!w-16 !h-16 drop-shadow rounded-3xl",avatarUrl:t==null?void 0:t.avatarUrl}),e.jsxs("div",{className:"mt-2 w-auto max-w-[calc(100%-6rem)] flex flex-col justify-center items-start",children:[e.jsx("p",{className:"w-full text-3xl text-black leading-tight font-medium opacity-80 dark:text-gray-200 truncate",children:t.nickname||t.username}),e.jsx("p",{className:"w-full text-gray-500 leading-snug dark:text-gray-400 whitespace-pre-wrap truncate line-clamp-6",children:t.description})]})]}),e.jsx(U,{renderer:r=>e.jsx(T,{memo:r,showVisibility:!0,showPinned:!0,compact:!0},"".concat(r.name,"-").concat(r.displayTime)),listSort:r=>r.filter(s=>s.state===k.NORMAL).sort((s,a)=>x.state.orderByTimeAsc?o(s.displayTime).unix()-o(a.displayTime).unix():o(a.displayTime).unix()-o(s.displayTime).unix()).sort((s,a)=>Number(a.pinned)-Number(s.pinned)),owner:t.name,direction:x.state.orderByTimeAsc?f.ASC:f.DESC,oldFilter:h})]}):e.jsx("p",{children:"Not found"}))})})});export{V as default};
